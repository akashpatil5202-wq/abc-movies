<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ABC Movies - Netflix Edition</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --red: #e50914; --black: #141414; }
        body { margin: 0; background: #000; color: white; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; overflow-x: hidden; }
        
        /* Netflix Style Header */
        header { position: fixed; top: 0; width: 100%; z-index: 1000; background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%); padding: 15px 4%; display: flex; align-items: center; box-sizing: border-box; transition: 0.5s; }
        .logo { color: var(--red); font-size: 24px; font-weight: 900; letter-spacing: -1px; }

        /* Hero Banner */
        .hero { height: 70vh; background: linear-gradient(to top, #000 10%, transparent 50%), url('https://image.tmdb.org/t/p/original/6MKs3vS7YUrAtvOBp97O9p8Iu8u.jpg'); background-size: cover; display: flex; align-items: flex-end; padding: 0 4% 50px; }
        .hero-content h1 { font-size: 3rem; margin: 0; }

        /* Movie Grid */
        .row-title { font-size: 1.2rem; margin: 20px 4% 10px; font-weight: bold; }
        .movie-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 10px; padding: 0 4% 100px; }
        .m-card { transition: transform 0.3s; border-radius: 4px; overflow: hidden; position: relative; }
        .m-card:active { transform: scale(0.95); }
        .m-card img { width: 100%; aspect-ratio: 2/3; object-fit: cover; }
        
        /* Bottom Nav */
        nav { position: fixed; bottom: 0; width: 100%; height: 70px; background: rgba(0,0,0,0.9); backdrop-filter: blur(10px); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid #333; z-index: 2000; }
        .nav-item { color: #808080; text-align: center; font-size: 10px; cursor: pointer; }
        .nav-item.active { color: white; }
        .nav-item i { font-size: 20px; margin-bottom: 5px; }

        /* Admin & Player */
        .panel { display: none; padding-top: 100px; }
        .active-panel { display: block; }
        #player { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 5000; display: none; }
        video { width: 100%; height: 100%; }
        
        .admin-box { background: #181818; margin: 0 4%; padding: 20px; border-radius: 8px; border: 1px solid #333; }
        input { width: 100%; padding: 12px; margin: 10px 0; background: #333; border: none; color: white; border-radius: 4px; box-sizing: border-box; }
        .btn { background: var(--red); color: white; border: none; padding: 12px; width: 100%; font-weight: bold; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>

    <header><div class="logo">ABC</div></header>

    <div id="home-view" class="panel active-panel">
        <div class="hero"><div class="hero-content"><h1>Welcome</h1></div></div>
        <div class="row-title">Recently Added</div>
        <div id="movie-grid" class="movie-grid"></div>
    </div>

    <div id="admin-view" class="panel">
        <div class="admin-box">
            <h2 style="color:var(--red)">Admin Panel</h2>
            <input type="text" id="m-name" placeholder="Movie Name">
            <p style="font-size:12px; color:#aaa;">Poster Select Karein:</p>
            <input type="file" id="m-pos" accept="image/*">
            <p style="font-size:12px; color:yellow;">Video File Chunein (Storage se Stream hogi):</p>
            <input type="file" id="m-vid" accept="video/*">
            <button class="btn" onclick="saveMovie()">Add to Library</button>
        </div>
        <div id="admin-list" style="margin-top:20px; padding: 0 4%;"></div>
    </div>

    <nav>
        <div class="nav-item active" onclick="showPanel('home', this)"><i class="fas fa-home"></i><br>Home</div>
        <div class="nav-item" onclick="openAdmin(this)"><i class="fas fa-user-shield"></i><br>Admin</div>
        <div class="nav-item" onclick="location.reload()"><i class="fas fa-sync-alt"></i><br>Refresh</div>
    </nav>

    <div id="player">
        <div onclick="closeV()" style="position:absolute; top:30px; left:30px; z-index:5001; font-size:25px;"><i class="fas fa-arrow-left"></i></div>
        <video id="vid" controls playsinline></video>
    </div>

    <script>
        let db;
        const PASS = "Akash$2009";
        
        // Database Setup
        const request = indexedDB.open("ABC_Netflix_DB", 1);
        request.onupgradeneeded = e => {
            db = e.target.result;
            db.createObjectStore("movies", { keyPath: "id" });
        };
        request.onsuccess = e => {
            db = e.target.result;
            render();
        };

        function saveMovie() {
            const name = document.getElementById('m-name').value;
            const pFile = document.getElementById('m-pos').files[0];
            const vFile = document.getElementById('m-vid').files[0];

            if(!name || !vFile) return alert("Details bhariye!");

            const reader = new FileReader();
            reader.onload = function(e) {
                // Hum poori video save nahi karenge, sirf uska "Name" aur "Poster" save karenge
                // Video ke liye hume hamesha file select karni hogi security ke liye
                const data = {
                    id: Date.now(),
                    name: name,
                    poster: e.target.result || 'https://via.placeholder.com/150'
                };
                
                db.transaction("movies", "readwrite").objectStore("movies").add(data);
                alert("Movie index ho gayi! Storage 0 MB kharch hui.");
                location.reload(); 
            };
            if(pFile) reader.readAsDataURL(pFile);
            else reader.onload({target:{result:''}});
        }

        function render() {
            const grid = document.getElementById('movie-grid');
            const alist = document.getElementById('admin-list');
            db.transaction("movies").objectStore("movies").getAll().onsuccess = e => {
                const list = e.target.result;
                grid.innerHTML = list.map(m => `
                    <div class="m-card" onclick="playV('${m.name}')">
                        <img src="${m.poster}">
                        <div class="m-name">${m.name}</div>
                    </div>`).join('');
                
                alist.innerHTML = list.map(m => `
                    <div style="padding:10px; background:#222; margin-bottom:10px; border-radius:4px;">
                        ${m.name} <i class="fas fa-trash" style="float:right; color:red" onclick="del(${m.id})"></i>
                    </div>`).join('');
            };
        }

        function playV(name) {
            // Browser security policy: App direct storage se file nahi utha sakta
            // Isliye play karne ke liye ek baar file manager se file confirm karni hogi
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'video/*';
            input.onchange = e => {
                const file = e.target.files[0];
                const v = document.getElementById('vid');
                v.src = URL.createObjectURL(file); // 0 MB Storage Use
                document.getElementById('player').style.display = "block";
                v.play();
            };
            alert("Security Check: Play karne ke liye wahi video file chunein.");
            input.click();
        }

        function openAdmin(el) { if(prompt("Password:") === PASS) showPanel('admin', el); }
        
        function showPanel(id, el) {
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active-panel'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(id + '-view').classList.add('active-panel');
            el.classList.add('active');
        }

        function closeV() {
            const v = document.getElementById('vid');
            v.pause();
            v.src = "";
            document.getElementById('player').style.display = "none";
        }

        function del(id) {
            if(confirm("Delete index?")) {
                db.transaction("movies", "readwrite").objectStore("movies").delete(id).oncomplete = () => location.reload();
            }
        }
    </script>
</body>
</html>